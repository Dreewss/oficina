<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="http://www.w3.org/2000/svg" type="image/svg+xml">
</head>
<body>
    <div class="layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path></svg>
                <h1>AutoParts</h1>
            </div>
            <nav class="menu">
                <a href="#dashboard" class="menu-item" data-tab="dashboard">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v18h18"></path><path d="m19 9-5 5-4-4-3 3"></path></svg>
                    Dashboard
                </a>
                <a href="#ordens" class="menu-item" data-tab="ordens">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><path d="M15 2H9a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1Z"></path><path d="M12 11h4"></path><path d="M12 16h4"></path><path d="M8 11h.01"></path><path d="M8 16h.01"></path></svg>
                    Ordens de Serviço
                </a>
                <a href="#veiculos" class="menu-item" data-tab="veiculos">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"></path><circle cx="7" cy="17" r="2"></circle><path d="M9 17h6"></path><circle cx="17" cy="17" r="2"></circle></svg>
                    Veículos
                </a>
                <a href="#clientes" class="menu-item" data-tab="clientes">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                    Clientes
                </a>
                <a href="#estoque" class="menu-item" data-tab="estoque">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 8h-9l-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2z"></path><path d="M2 10h20"></path></svg>
                    Estoque
                </a>
            </nav>
        </aside>

        <!-- Menu móvel -->
        <input type="checkbox" id="menu-toggle" class="menu-toggle">
        <label for="menu-toggle" class="menu-button">
            <span></span>
            <span></span>
            <span></span>
        </label>

        <!-- Conteúdo principal -->
        <main class="main-content">
            <!-- Dashboard -->
            <div class="tab-content active" id="dashboard">
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Serviços em Andamento</h3>
                        <p class="stat-value" id="servicos-andamento">12</p>
                    </div>
                    <div class="stat-card">
                        <h3>Aguardando Aprovação</h3>
                        <p class="stat-value" id="aguardando-aprovacao">5</p>
                    </div>
                    <div class="stat-card">
                        <h3>Concluídos Hoje</h3>
                        <p class="stat-value" id="concluidos-hoje">8</p>
                    </div>
                    <div class="stat-card">
                        <h3>Total de Clientes</h3>
                        <p class="stat-value" id="total-clientes">156</p>
                    </div>
                </div>

                <div class="orders-table">
                    <h2>Ordens de Serviço Recentes</h2>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>OS</th>
                                    <th>Cliente</th>
                                    <th>Veículo</th>
                                    <th>Serviço</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="recent-orders-body">
                                <!-- As ordens recentes serão preenchidas dinamicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Ordens de Serviço -->
            <div class="tab-content" id="ordens">
                <div class="page-header">
                    <h2>Ordens de Serviço</h2>
                    <button class="btn-primary" onclick="openPopup('popup-nova-ordem')">Nova Ordem</button>
                </div>
                <div class="search-bar">
                    <input type="text" id="search-order" placeholder="Buscar ordem de serviço..." oninput="filterOrders()">
                    <select id="filter-order-status" onchange="filterOrders()">
                        <option value="">Status</option>
                        <option value="em-andamento">Em Andamento</option>
                        <option value="aguardando">Aguardando</option>
                        <option value="concluido">Concluído</option>
                    </select>
                </div>
                <div class="orders-table">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>OS</th>
                                    <th>Data</th>
                                    <th>Cliente</th>
                                    <th>Veículo</th>
                                    <th>Serviço</th>
                                    <th>Valor</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="orders-body">
                                <!-- As ordens serão preenchidas dinamicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Veículos -->
            <div class="tab-content" id="veiculos">
                <div class="page-header">
                    <h2>Veículos</h2>
                    <button class="btn-primary" onclick="openPopup('popup-novo-veiculo')">Novo Veículo</button>
                </div>
                <div class="search-bar">
                    <input type="text" id="search-vehicle" placeholder="Buscar veículo..." oninput="filterVehicles()">
                    <select id="filter-vehicle-brand" onchange="filterVehicles()">
                        <option value="">Marca</option>
                        <option value="audi">Audi</option>
                        <option value="bmw">BMW</option>
                        <option value="chevrolet">Chevrolet</option>
                        <option value="citroen">Citroën</option>
                        <option value="fiat">Fiat</option>
                        <option value="ford">Ford</option>
                        <option value="honda">Honda</option>
                        <option value="hyundai">Hyundai</option>
                        <option value="jeep">Jeep</option>
                        <option value="kia">Kia</option>
                        <option value="land-rover">Land Rover</option>
                        <option value="lexus">Lexus</option>
                        <option value="mercedes-benz">Mercedes-Benz</option>
                        <option value="mitsubishi">Mitsubishi</option>
                        <option value="nissan">Nissan</option>
                        <option value="peugeot">Peugeot</option>
                        <option value="porsche">Porsche</option>
                        <option value="renault">Renault</option>
                        <option value="subaru">Subaru</option>
                        <option value="suzuki">Suzuki</option>
                        <option value="toyota">Toyota</option>
                        <option value="volkswagen">Volkswagen</option>
                        <option value="volvo">Volvo</option>
                    </select>
                </div>
                <div class="grid-cards" id="vehicles-grid">
                    <!-- Os veículos serão preenchidos dinamicamente -->
                </div>
            </div>

            <!-- Clientes -->
            <div class="tab-content" id="clientes">
                <div class="page-header">
                    <h2>Clientes</h2>
                    <button class="btn-primary" onclick="openPopup('popup-novo-cliente')">Novo Cliente</button>
                </div>
                <div class="search-bar">
                    <input type="text" id="search-client" placeholder="Buscar cliente..." oninput="filterClients()">
                </div>
                <div class="grid-cards" id="clients-grid">
                    <!-- Os clientes serão preenchidos dinamicamente -->
                </div>
            </div>

            <!-- Estoque -->
            <div class="tab-content" id="estoque">
                <div class="page-header">
                    <h2>Estoque</h2>
                    <button class="btn-primary" onclick="openPopup('popup-novo-item')">Novo Item</button>
                </div>
                <div class="search-bar">
                    <input type="text" id="search-item" placeholder="Buscar item..." oninput="filterInventory()">
                    <select id="filter-item-category" onchange="filterInventory()">
                        <option value="">Categoria</option>
                        <option value="filtros">Filtros</option>
                        <option value="pastilhas">Pastilhas</option>
                        <option value="suspencao">Suspenção</option>
                        <option value="velas">Velas</option>
                        <option value="correias">Correias</option>
                        <option value="rolamentos">Rolamentos e buchas</option>
                        <option value="baterias">Baterias</option>
                        <option value="parafusos">Parafusos</option>
                        <option value="oleos">Óleos e Fluidos</option>
                        <option value="acessorios">Acessórios</option>
                    </select>
                </div>
                <div class="orders-table">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Código</th>
                                    <th>Item</th>
                                    <th>Categoria</th>
                                    <th>Quantidade</th>
                                    <th>Preço Unit.</th>
                                    <th>Fornecedor</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="inventory-body">
                                <!-- Os itens do estoque serão preenchidos dinamicamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Popups -->
    <div id="popup-overlay" class="popup-overlay">
        <!-- Popup para Nova Ordem de Serviço -->
        <div id="popup-nova-ordem" class="popup">
            <h2>Nova Ordem de Serviço</h2>
            <form id="form-nova-ordem" onsubmit="addOrder(event)">
                <label for="os">OS:</label>
                <input type="text" id="os" name="os" required>

                <label for="data">Data:</label>
                <input type="date" id="data" name="data" required>

                <label for="cliente">Cliente:</label>
                <select id="cliente" name="cliente" required>
                    <option value="">Selecione um cliente</option>
                    <!-- Opções de clientes serão preenchidas dinamicamente -->
                </select>

                <label for="veiculo">Veículo:</label>
                <select id="veiculo" name="veiculo" required>
                    <option value="">Selecione um veículo</option>
                    <!-- Opções de veículos serão preenchidas dinamicamente -->
                </select>

                <label for="servico">Serviço:</label>
                <input type="text" id="servico" name="servico" required>

                <label for="valor">Valor:</label>
                <input type="number" id="valor" name="valor" required>

                <label for="status">Status:</label>
                <select id="status" name="status" required>
                    <option value="em-andamento">Em Andamento</option>
                    <option value="aguardando">Aguardando</option>
                    <option value="concluido">Concluído</option>
                </select>

                <button type="submit">Salvar</button>
            </form>
            <button class="btn-close" onclick="closePopup('popup-nova-ordem')">Fechar</button>
        </div>

        <!-- Popup para Novo Veículo -->
        <div id="popup-novo-veiculo" class="popup">
            <h2>Novo Veículo</h2>
            <form id="form-novo-veiculo" onsubmit="addVehicle(event)">
                <label for="marca">Marca:</label>
                <input type="text" id="marca" name="marca" required>

                <label for="placa">Placa:</label>
                <input type="text" id="placa" name="placa" required>

                <label for="cliente-veiculo">Cliente:</label>
                <select id="cliente-veiculo" name="cliente-veiculo" required>
                    <option value="">Selecione um cliente</option>
                    <!-- Opções de clientes serão preenchidas dinamicamente -->
                </select>

                <label for="data-veiculo">Data:</label>
                <input type="date" id="data-veiculo" name="data-veiculo" required>

                <button type="submit">Salvar</button>
            </form>
            <button class="btn-close" onclick="closePopup('popup-novo-veiculo')">Fechar</button>
        </div>

        <!-- Popup para Novo Cliente -->
        <div id="popup-novo-cliente" class="popup">
            <h2>Novo Cliente</h2>
            <form id="form-novo-cliente" onsubmit="addClient(event)">
                <label for="nome">Nome:</label>
                <input type="text" id="nome" name="nome" required>

                <label for="cpf">CPF:</label>
                <input type="text" id="cpf" name="cpf" required>

                <label for="telefone">Telefone:</label>
                <input type="text" id="telefone" name="telefone" required>

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>

                <label for="quantidade-veiculos">Quantidade de Veículos:</label>
                <input type="number" id="quantidade-veiculos" name="quantidade-veiculos" required>

                <button type="submit">Salvar</button>
            </form>
            <button class="btn-close" onclick="closePopup('popup-novo-cliente')">Fechar</button>
        </div>

        <!-- Popup para Novo Item no Estoque -->
        <div id="popup-novo-item" class="popup">
            <h2>Novo Item no Estoque</h2>
            <form id="form-novo-item" onsubmit="addInventoryItem(event)">
                <label for="item">Item:</label>
                <input type="text" id="item" name="item" required>

                <label for="categoria">Categoria:</label>
                <select id="categoria" name="categoria" required>
                    <option value="">Selecione uma categoria</option>
                    <option value="filtros">Filtros</option>
                    <option value="pastilhas">Pastilhas</option>
                    <option value="suspencao">Suspenção</option>
                    <option value="velas">Velas</option>
                    <option value="correias">Correias</option>
                    <option value="rolamentos">Rolamentos e buchas</option>
                    <option value="baterias">Baterias</option>
                    <option value="parafusos">Parafusos</option>
                    <option value="oleos">Óleos e Fluidos</option>
                    <option value="acessorios">Acessórios</option>
                </select>

                <label for="quantidade">Quantidade:</label>
                <input type="number" id="quantidade" name="quantidade" required>

                <button type="submit">Salvar</button>
            </form>
            <button class="btn-close" onclick="closePopup('popup-novo-item')">Fechar</button>
        </div>

        <!-- Popup para Editar Item no Estoque -->
        <div id="popup-editar-item" class="popup">
            <h2>Editar Item no Estoque</h2>
            <form id="form-editar-item" onsubmit="editInventoryItem(event)">
                <input type="hidden" id="edit-item-id">
                <label for="edit-item">Item:</label>
                <input type="text" id="edit-item" name="edit-item" required>

                <label for="edit-categoria">Categoria:</label>
                <select id="edit-categoria" name="edit-categoria" required>
                    <option value="">Selecione uma categoria</option>
                    <option value="filtros">Filtros</option>
                    <option value="pastilhas">Pastilhas</option>
                    <option value="suspencao">Suspenção</option>
                    <option value="velas">Velas</option>
                    <option value="correias">Correias</option>
                    <option value="rolamentos">Rolamentos e buchas</option>
                    <option value="baterias">Baterias</option>
                    <option value="parafusos">Parafusos</option>
                    <option value="oleos">Óleos e Fluidos</option>
                    <option value="acessorios">Acessórios</option>
                </select>

                <label for="edit-quantidade">Quantidade:</label>
                <input type="number" id="edit-quantidade" name="edit-quantidade" required>

                <button type="submit">Salvar</button>
            </form>
            <button class="btn-close" onclick="closePopup('popup-editar-item')">Fechar</button>
        </div>
    </div>

    <script>
        // Dados de exemplo
        let orders = [];
        let vehicles = [];
        let clients = [];
        let inventory = [];

        // Função para abrir popups
        function openPopup(popupId) {
            const popupOverlay = document.getElementById('popup-overlay');
            const popups = document.querySelectorAll('.popup');

            // Oculta todos os popups
            popups.forEach(popup => {
                popup.style.display = 'none';
            });

            // Exibe o popup desejado
            const popup = document.getElementById(popupId);
            popupOverlay.style.display = 'flex';
            popup.style.display = 'block';
        }

        // Função para fechar popups
        function closePopup(popupId) {
            const popupOverlay = document.getElementById('popup-overlay');
            const popup = document.getElementById(popupId);

            popupOverlay.style.display = 'none';
            popup.style.display = 'none';
        }

        // Navegação entre abas
        document.querySelectorAll('.menu-item').forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                const tabId = item.getAttribute('data-tab');
                
                // Remove active class from all tabs and menu items
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelectorAll('.menu-item').forEach(menuItem => {
                    menuItem.classList.remove('active');
                });
                
                // Add active class to selected tab and menu item
                document.getElementById(tabId).classList.add('active');
                item.classList.add('active');
                
                // Close mobile menu if open
                document.getElementById('menu-toggle').checked = false;
            });
        });

        // Set dashboard as active by default
        document.querySelector('[data-tab="dashboard"]').classList.add('active');
        document.getElementById('dashboard').classList.add('active');

        // Função para carregar dados dinâmicos
        function loadData() {
            // Exemplo de carregamento de dados para o dashboard
            document.getElementById('servicos-andamento').innerText = '12';
            document.getElementById('aguardando-aprovacao').innerText = '5';
            document.getElementById('concluidos-hoje').innerText = '8';
            document.getElementById('total-clientes').innerText = '156';

            // Exemplo de carregamento de ordens recentes
            orders = [
                { os: '001', cliente: 'João Silva', veiculo: 'Fiat Uno', servico: 'Troca de óleo', status: 'Em Andamento' },
                { os: '002', cliente: 'Maria Oliveira', veiculo: 'Volkswagen Gol', servico: 'Alinhamento', status: 'Aguardando Peças' },
                { os: '003', cliente: 'Carlos Souza', veiculo: 'Chevrolet Onix', servico: 'Revisão', status: 'Concluído' }
            ];

            const recentOrdersBody = document.getElementById('recent-orders-body');
            recentOrdersBody.innerHTML = orders.map(order => `
                <tr>
                    <td>${order.os}</td>
                    <td>${order.cliente}</td>
                    <td>${order.veiculo}</td>
                    <td>${order.servico}</td>
                    <td><span class="status ${order.status.toLowerCase().replace(' ', '-')}">${order.status}</span></td>
                    <td>
                        <button class="btn-icon" onclick="changeStatus('${order.os}', 'em-andamento')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>
                        </button>
                        <button class="btn-icon" onclick="changeStatus('${order.os}', 'aguardando')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>
                        </button>
                        <button class="btn-icon" onclick="removeVehicle('${order.os}')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
                        </button>
                    </td>
                </tr>
            `).join('');

            // Exemplo de carregamento de veículos
            vehicles = [
                { marca: 'Fiat', placa: 'ABC-1234', cliente: 'João Silva', data: '2023-10-01' },
                { marca: 'Volkswagen', placa: 'DEF-5678', cliente: 'Maria Oliveira', data: '2023-10-02' }
            ];

            const vehiclesGrid = document.getElementById('vehicles-grid');
            vehiclesGrid.innerHTML = vehicles.map(vehicle => `
                <div class="vehicle-card">
                    <div class="vehicle-info">
                        <h3>${vehicle.marca}</h3>
                        <p>${vehicle.placa}</p>
                        <p>${vehicle.cliente}</p>
                        <p>${vehicle.data}</p>
                    </div>
                    <div class="vehicle-actions">
                        <button class="btn-icon" onclick="deleteVehicle('${vehicle.placa}')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
                        </button>
                    </div>
                </div>
            `).join('');

            // Exemplo de carregamento de clientes
            clients = [
                { nome: 'João Silva', cpf: '123.456.789-00', telefone: '(11) 99999-9999', email: 'joao@example.com', veiculos: 1 },
                { nome: 'Maria Oliveira', cpf: '987.654.321-00', telefone: '(11) 88888-8888', email: 'maria@example.com', veiculos: 2 }
            ];

            const clientsGrid = document.getElementById('clients-grid');
            clientsGrid.innerHTML = clients.map(client => `
                <div class="client-card">
                    <div class="client-info">
                        <h3>${client.nome}</h3>
                        <p>${client.cpf}</p>
                        <p>${client.telefone}</p>
                        <p>${client.email}</p>
                        <p>${client.veiculos} veículo(s)</p>
                    </div>
                    <div class="client-actions">
                        <button class="btn-secondary" onclick="viewClientDetails('${client.cpf}')">Mais Detalhes</button>
                        <button class="btn-primary" onclick="sendEmail('${client.email}')">Enviar E-mail</button>
                    </div>
                </div>
            `).join('');

            // Exemplo de carregamento de estoque
            inventory = [
                { id: 'P001', item: 'Filtro de Óleo', categoria: 'Filtros', quantidade: 15, preco: 35.00, fornecedor: 'AutoPeças Ltda', status: 'Em Estoque' },
                { id: 'P002', item: 'Pastilhas de Freio', categoria: 'Pastilhas', quantidade: 10, preco: 120.00, fornecedor: 'Freios & Cia', status: 'Em Estoque' }
            ];

            const inventoryBody = document.getElementById('inventory-body');
            inventoryBody.innerHTML = inventory.map(item => `
                <tr>
                    <td>${item.id}</td>
                    <td>${item.item}</td>
                    <td>${item.categoria}</td>
                    <td>${item.quantidade}</td>
                    <td>R$ ${item.preco.toFixed(2)}</td>
                    <td>${item.fornecedor}</td>
                    <td><span class="status ${item.status.toLowerCase().replace(' ', '-')}">${item.status}</span></td>
                    <td class="actions">
                        <button class="btn-icon" onclick="editInventoryItemPopup('${item.id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                        </button>
                        <button class="btn-icon" onclick="deleteInventoryItem('${item.id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"></path><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        // Função para alterar o status de um veículo
        function changeStatus(os, status) {
            const order = orders.find(o => o.os === os);
            if (order) {
                order.status = status;
                loadData();
            }
        }

        // Função para remover um veículo
        function removeVehicle(os) {
            orders = orders.filter(o => o.os !== os);
            loadData();
        }

        // Função para deletar um veículo
        function deleteVehicle(placa) {
            vehicles = vehicles.filter(v => v.placa !== placa);
            loadData();
        }

        // Função para enviar e-mail
        function sendEmail(email) {
            window.open(`https://mail.google.com/mail/?view=cm&fs=1&to=${email}`, '_blank');
        }

        // Função para filtrar ordens de serviço
        function filterOrders() {
            const searchText = document.getElementById('search-order').value.toLowerCase();
            const filterStatus = document.getElementById('filter-order-status').value;

            const filteredOrders = orders.filter(order => {
                const matchesSearch = order.os.toLowerCase().includes(searchText) ||
                                     order.cliente.toLowerCase().includes(searchText) ||
                                     order.veiculo.toLowerCase().includes(searchText) ||
                                     order.servico.toLowerCase().includes(searchText);

                const matchesStatus = filterStatus ? order.status.toLowerCase() === filterStatus : true;

                return matchesSearch && matchesStatus;
            });

            const ordersBody = document.getElementById('orders-body');
            ordersBody.innerHTML = filteredOrders.map(order => `
                <tr>
                    <td>${order.os}</td>
                    <td>${order.data}</td>
                    <td>${order.cliente}</td>
                    <td>${order.veiculo}</td>
                    <td>${order.servico}</td>
                    <td>R$ ${order.valor.toFixed(2)}</td>
                    <td><span class="status ${order.status.toLowerCase().replace(' ', '-')}">${order.status}</span></td>
                    <td class="actions">
                        <button class="btn-icon" onclick="editOrder('${order.os}')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                        </button>
                        <button class="btn-icon" onclick="deleteOrder('${order.os}')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"></path><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        // Função para filtrar veículos
        function filterVehicles() {
            const searchText = document.getElementById('search-vehicle').value.toLowerCase();
            const filterBrand = document.getElementById('filter-vehicle-brand').value;

            const filteredVehicles = vehicles.filter(vehicle => {
                const matchesSearch = vehicle.marca.toLowerCase().includes(searchText) ||
                                     vehicle.placa.toLowerCase().includes(searchText) ||
                                     vehicle.cliente.toLowerCase().includes(searchText);

                const matchesBrand = filterBrand ? vehicle.marca.toLowerCase() === filterBrand : true;

                return matchesSearch && matchesBrand;
            });

            const vehiclesGrid = document.getElementById('vehicles-grid');
            vehiclesGrid.innerHTML = filteredVehicles.map(vehicle => `
                <div class="vehicle-card">
                    <div class="vehicle-info">
                        <h3>${vehicle.marca}</h3>
                        <p>${vehicle.placa}</p>
                        <p>${vehicle.cliente}</p>
                        <p>${vehicle.data}</p>
                    </div>
                    <div class="vehicle-actions">
                        <button class="btn-icon" onclick="deleteVehicle('${vehicle.placa}')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Função para filtrar clientes
        function filterClients() {
            const searchText = document.getElementById('search-client').value.toLowerCase();

            const filteredClients = clients.filter(client => {
                return client.nome.toLowerCase().includes(searchText) ||
                       client.cpf.toLowerCase().includes(searchText) ||
                       client.email.toLowerCase().includes(searchText);
            });

            const clientsGrid = document.getElementById('clients-grid');
            clientsGrid.innerHTML = filteredClients.map(client => `
                <div class="client-card">
                    <div class="client-info">
                        <h3>${client.nome}</h3>
                        <p>${client.cpf}</p>
                        <p>${client.telefone}</p>
                        <p>${client.email}</p>
                        <p>${client.veiculos} veículo(s)</p>
                    </div>
                    <div class="client-actions">
                        <button class="btn-secondary" onclick="viewClientDetails('${client.cpf}')">Mais Detalhes</button>
                        <button class="btn-primary" onclick="sendEmail('${client.email}')">Enviar E-mail</button>
                    </div>
                </div>
            `).join('');
        }

        // Função para filtrar itens do estoque
        function filterInventory() {
            const searchText = document.getElementById('search-item').value.toLowerCase();
            const filterCategory = document.getElementById('filter-item-category').value;

            const filteredInventory = inventory.filter(item => {
                const matchesSearch = item.item.toLowerCase().includes(searchText) ||
                                     item.categoria.toLowerCase().includes(searchText);

                const matchesCategory = filterCategory ? item.categoria.toLowerCase() === filterCategory : true;

                return matchesSearch && matchesCategory;
            });

            const inventoryBody = document.getElementById('inventory-body');
            inventoryBody.innerHTML = filteredInventory.map(item => `
                <tr>
                    <td>${item.id}</td>
                    <td>${item.item}</td>
                    <td>${item.categoria}</td>
                    <td>${item.quantidade}</td>
                    <td>R$ ${item.preco.toFixed(2)}</td>
                    <td>${item.fornecedor}</td>
                    <td><span class="status ${item.status.toLowerCase().replace(' ', '-')}">${item.status}</span></td>
                    <td class="actions">
                        <button class="btn-icon" onclick="editInventoryItemPopup('${item.id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                        </button>
                        <button class="btn-icon" onclick="deleteInventoryItem('${item.id}')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"></path><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        // Função para adicionar uma nova ordem de serviço
        function addOrder(event) {
            event.preventDefault();
            const os = document.getElementById('os').value;
            const data = document.getElementById('data').value;
            const cliente = document.getElementById('cliente').value;
            const veiculo = document.getElementById('veiculo').value;
            const servico = document.getElementById('servico').value;
            const valor = parseFloat(document.getElementById('valor').value);
            const status = document.getElementById('status').value;

            const newOrder = { os, data, cliente, veiculo, servico, valor, status };
            orders.push(newOrder);

            filterOrders();
            closePopup('popup-nova-ordem');
        }

        // Função para adicionar um novo veículo
        function addVehicle(event) {
            event.preventDefault();
            const marca = document.getElementById('marca').value;
            const placa = document.getElementById('placa').value;
            const cliente = document.getElementById('cliente-veiculo').value;
            const data = document.getElementById('data-veiculo').value;

            const newVehicle = { marca, placa, cliente, data };
            vehicles.push(newVehicle);

            filterVehicles();
            closePopup('popup-novo-veiculo');
        }

        // Função para adicionar um novo cliente
        function addClient(event) {
            event.preventDefault();
            const nome = document.getElementById('nome').value;
            const cpf = document.getElementById('cpf').value;
            const telefone = document.getElementById('telefone').value;
            const email = document.getElementById('email').value;
            const quantidadeVeiculos = parseInt(document.getElementById('quantidade-veiculos').value);

            const newClient = { nome, cpf, telefone, email, veiculos: quantidadeVeiculos };
            clients.push(newClient);

            filterClients();
            closePopup('popup-novo-cliente');
        }

        // Função para adicionar um novo item ao estoque
        function addInventoryItem(event) {
            event.preventDefault();
            const item = document.getElementById('item').value;
            const categoria = document.getElementById('categoria').value;
            const quantidade = parseInt(document.getElementById('quantidade').value);

            const newItem = { id: `P${inventory.length + 1}`, item, categoria, quantidade, preco: 0, fornecedor: '', status: 'Em Estoque' };
            inventory.push(newItem);

            filterInventory();
            closePopup('popup-novo-item');
        }

        // Função para editar um item do estoque
        function editInventoryItemPopup(itemId) {
            const item = inventory.find(i => i.id === itemId);
            if (item) {
                document.getElementById('edit-item-id').value = item.id;
                document.getElementById('edit-item').value = item.item;
                document.getElementById('edit-categoria').value = item.categoria;
                document.getElementById('edit-quantidade').value = item.quantidade;

                openPopup('popup-editar-item');
            }
        }

        // Função para salvar a edição de um item do estoque
        function editInventoryItem(event) {
            event.preventDefault();
            const itemId = document.getElementById('edit-item-id').value;
            const item = document.getElementById('edit-item').value;
            const categoria = document.getElementById('edit-categoria').value;
            const quantidade = parseInt(document.getElementById('edit-quantidade').value);

            const index = inventory.findIndex(i => i.id === itemId);
            if (index !== -1) {
                inventory[index] = { ...inventory[index], item, categoria, quantidade };
            }

            filterInventory();
            closePopup('popup-editar-item');
        }

        // Função para excluir um item do estoque
        function deleteInventoryItem(itemId) {
            inventory = inventory.filter(item => item.id !== itemId);
            filterInventory();
        }

        // Função para visualizar o histórico de um veículo
        function viewVehicleHistory(placa) {
            alert(`Histórico do veículo com placa ${placa}`);
        }

        // Função para visualizar detalhes de um cliente
        function viewClientDetails(cpf) {
            const client = clients.find(c => c.cpf === cpf);
            if (client) {
                alert(`Detalhes do cliente:\nNome: ${client.nome}\nCPF: ${client.cpf}\nTelefone: ${client.telefone}\nEmail: ${client.email}\nVeículos: ${client.veiculos}`);
            }
        }

        // Carregar dados ao carregar a página
        window.onload = loadData;
    </script>
</body>
</html>
